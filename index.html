<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4K Space Control Center</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<style>
body { margin:0; background:black; overflow:hidden; font-family:monospace; color:white;}
#hud{
 position:absolute;
 top:20px;
 left:20px;
 background:rgba(0,0,0,0.7);
 padding:20px;
 border-radius:12px;
 max-width:320px;
}
#apod{
 position:absolute;
 bottom:20px;
 left:20px;
 width:320px;
 background:rgba(0,0,0,0.7);
 padding:15px;
 border-radius:12px;
 max-height:300px;
 overflow:auto;
}
</style>
</head>
<body>

<div id="hud">Y√ºkleniyor...</div>
<div id="apod">APOD y√ºkleniyor...</div>

<script>
const NASA_KEY = "E2DuMX4MkjnfeQkxbaPW96iNgBp4pz5IuHHKuECB";

/* 4K RENDER */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.outputColorSpace = THREE.SRGBColorSpace;
document.body.appendChild(renderer.domElement);

/* YILDIZ ARKA PLAN */
const starGeometry = new THREE.BufferGeometry();
const starCount = 10000;
const positions = new Float32Array(starCount * 3);
for(let i=0;i<starCount*3;i++){
 positions[i]=(Math.random()-0.5)*2000;
}
starGeometry.setAttribute("position", new THREE.BufferAttribute(positions,3));
const starMaterial = new THREE.PointsMaterial({size:1});
const stars = new THREE.Points(starGeometry, starMaterial);
scene.add(stars);

/* D√úNYA 4K */
const loader = new THREE.TextureLoader();
const earthTexture = loader.load(
"https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
);
const earth = new THREE.Mesh(
 new THREE.SphereGeometry(5,64,64),
 new THREE.MeshPhongMaterial({map:earthTexture})
);
scene.add(earth);

const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,3,5);
scene.add(light);

camera.position.z=15;

/* ISS */
const iss = new THREE.Mesh(
 new THREE.SphereGeometry(0.15,16,16),
 new THREE.MeshBasicMaterial({color:0xff0000})
);
scene.add(iss);

function latLongToVector3(lat, lon, radius){
 const phi=(90-lat)*(Math.PI/180);
 const theta=(lon+180)*(Math.PI/180);
 return new THREE.Vector3(
  -(radius*Math.sin(phi)*Math.cos(theta)),
   radius*Math.cos(phi),
   radius*Math.sin(phi)*Math.sin(theta)
 );
}

async function updateISS(){
 const res=await fetch("https://api.wheretheiss.at/v1/satellites/25544");
 const data=await res.json();
 iss.position.copy(latLongToVector3(data.latitude,data.longitude,5.3));
 document.getElementById("hud").innerHTML=
 `üõ∞Ô∏è ISS<br>
 Lat: ${data.latitude.toFixed(2)}<br>
 Lon: ${data.longitude.toFixed(2)}<br>
 Speed: ${data.velocity.toFixed(2)} km/h`;
}
setInterval(updateISS,4000);
updateISS();

/* APOD */
async function loadAPOD(){
 const res=await fetch(`https://api.nasa.gov/planetary/apod?api_key=${NASA_KEY}`);
 const data=await res.json();
 document.getElementById("apod").innerHTML=
 `<b>üì∏ ${data.title}</b><br>
 <img src="${data.url}" width="100%"><br>
 <small>${data.explanation.substring(0,200)}...</small>`;
}
loadAPOD();

/* ASTEROID */
async function loadAsteroids(){
 const today=new Date().toISOString().split("T")[0];
 const res=await fetch(
 `https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${NASA_KEY}`
 );
 const data=await res.json();
 const count=data.element_count;
 document.getElementById("hud").innerHTML+=
 `<br><br>‚òÑÔ∏è Bug√ºnk√º Asteroid: ${count}`;
}
loadAsteroids();

function animate(){
 requestAnimationFrame(animate);
 earth.rotation.y+=0.0005;
 stars.rotation.y+=0.0001;
 renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>
