<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4K Live Space Center</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<style>
body{margin:0;background:black;color:white;font-family:Arial;overflow-x:hidden}
#globe{height:60vh;width:100%}
#hud{
position:absolute;top:20px;left:20px;
background:rgba(0,0,0,0.6);
padding:15px;border-radius:12px;
font-size:14px
}
#apodSection{
padding:60px 20px;
text-align:center;
background:#000;
}
#apodSection img{
max-width:95%;
border-radius:16px;
margin-top:20px;
}
h1{font-weight:300}
</style>
</head>
<body>

<div id="globe"></div>
<div id="hud">ISS Y√ºkleniyor...</div>

<section id="apodSection">
<h1>üì∏ NASA G√ºn√ºn Uzay Fotoƒürafƒ±</h1>
<div id="apod">Y√ºkleniyor...</div>
</section>

<script>
const NASA_KEY="d6k0T5kQkEnECvgEs30pOJYmTBtpatXPkS5nqec5";

/* 4K GLOBE */
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,window.innerWidth/(window.innerHeight*0.6),0.1,5000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth,window.innerHeight*0.6);
renderer.outputColorSpace=THREE.SRGBColorSpace;
document.getElementById("globe").appendChild(renderer.domElement);

const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,3,5);
scene.add(light);

const loader=new THREE.TextureLoader();
const earthTex=loader.load("https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg");

const earth=new THREE.Mesh(
new THREE.SphereGeometry(6,128,128),
new THREE.MeshPhongMaterial({map:earthTex})
);
scene.add(earth);

camera.position.z=18;

/* ISS */
const iss=new THREE.Mesh(
new THREE.SphereGeometry(0.2,16,16),
new THREE.MeshBasicMaterial({color:0xff0000})
);
scene.add(iss);

function latLongToVector3(lat,lon,r){
const phi=(90-lat)*Math.PI/180;
const theta=(lon+180)*Math.PI/180;
return new THREE.Vector3(
-(r*Math.sin(phi)*Math.cos(theta)),
r*Math.cos(phi),
r*Math.sin(phi)*Math.sin(theta)
);
}

async function updateISS(){
try{
const res=await fetch("https://api.wheretheiss.at/v1/satellites/25544");
const data=await res.json();
iss.position.copy(latLongToVector3(data.latitude,data.longitude,6.4));
document.getElementById("hud").innerHTML=
`üõ∞Ô∏è ISS<br>
Lat: ${data.latitude.toFixed(2)}<br>
Lon: ${data.longitude.toFixed(2)}<br>
Speed: ${data.velocity.toFixed(0)} km/h`;
}catch{
document.getElementById("hud").innerHTML="ISS verisi alƒ±namadƒ±";
}
}
setInterval(updateISS,4000);
updateISS();

/* APOD HD */
async function loadAPOD(){
try{
const res=await fetch(`https://api.nasa.gov/planetary/apod?api_key=${NASA_KEY}`);
const data=await res.json();
let media="";
if(data.media_type==="image"){
media=`<img src="${data.hdurl || data.url}">`;
}else{
media=`<iframe width="90%" height="500" src="${data.url}" frameborder="0" allowfullscreen></iframe>`;
}
document.getElementById("apod").innerHTML=
`<h2>${data.title}</h2>
${media}
<p style="max-width:900px;margin:30px auto;line-height:1.6">
${data.explanation}
</p>`;
}catch{
document.getElementById("apod").innerHTML="APOD y√ºklenemedi";
}
}
loadAPOD();

/* ANIMATION */
function animate(){
requestAnimationFrame(animate);
earth.rotation.y+=0.0006;
renderer.render(scene,camera);
}
animate();
</script>

</body>
</html>
