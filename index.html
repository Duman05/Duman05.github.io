<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DumanBet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#111;color:white}
header{background:#1a1a1a;padding:15px;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid gold}
.logo{color:gold;font-size:22px;font-weight:bold}
nav button{background:none;border:none;color:white;margin:0 10px;cursor:pointer}
nav button:hover{color:gold}
.section{display:none;padding:20px}
input{padding:8px;margin:5px;width:250px}
button.main{padding:8px 15px;background:gold;border:none;cursor:pointer;font-weight:bold}
.balance{color:gold;font-size:18px;margin:10px}
iframe{width:100%;height:500px;border:none;margin-top:15px}
</style>
</head>
<body>

<header>
<div class="logo">DumanBet</div>
<nav>
<button onclick="showSection('home')">Ana Sayfa</button>
<button onclick="showSection('slot')">Slot</button>
<button onclick="showSection('live')">Canlı</button>
<button onclick="showSection('sport')">Spor</button>
<button onclick="showSection('auth')">Giriş/Kayıt</button>
<button onclick="showSection('admin')">Admin</button>
</nav>
</header>

<div id="home" class="section" style="display:block">
<h2>Hoşgeldiniz</h2>
<p>Premium Demo Eğlence Platformu</p>
</div>

<div id="slot" class="section">
<h2>Slot Alanı</h2>
<iframe src="https://softgamings12-gc-prod-bgsp.p4-pmmievrokhxky.com/?playerId=1627d_DemoUser&gameKey=FSHBLSlot&currencyCode=EUR&language=tr&mode=mobile&casinoId=187_SOFTGAMINGS12&demo=true"></iframe>
</div>

<div id="live" class="section">
<h2>Canlı Casino</h2>
<iframe src="https://example.com"></iframe>
</div>

<div id="sport" class="section">
<h2>Spor Alanı</h2>
<p>Demo spor alanı</p>
</div>

<div id="auth" class="section">
<h3>Kayıt Ol</h3>
<input type="text" id="name" placeholder="İsim"><br>
<input type="text" id="secondName" placeholder="İkinci İsim"><br>
<input type="date" id="birth"><br>
<input type="email" id="email"><br>
<input type="password" id="password" placeholder="Şifre"><br>
<button class="main" onclick="register()">Kayıt Ol</button>

<h3>Giriş Yap</h3>
<input type="email" id="loginEmail"><br>
<input type="password" id="loginPass" placeholder="Şifre"><br>
<button class="main" onclick="login()">Giriş Yap</button>
</div>

<div id="panel" class="section">
<h2 id="welcome"></h2>
<div class="balance">Bakiye: <span id="balance">0</span> ₺</div>
<button class="main" onclick="bonus()">+100 Bonus</button>
<button class="main" onclick="logout()">Çıkış</button>
</div>

<div id="admin" class="section">
<h2>Admin Panel</h2>
<p>Kullanıcı UID:</p>
<input type="text" id="uidInput" placeholder="UID"><br>
<p>Eklenecek Tutar:</p>
<input type="number" id="amountInput"><br>
<button class="main" onclick="addBalance()">Bakiye Ekle</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyAcywJ4bT_BvFntA53S9e1iM3Facr12qUo",
authDomain: "duman-site.firebaseapp.com",
projectId: "duman-site",
storageBucket: "duman-site.firebasestorage.app",
messagingSenderId: "208426888053",
appId: "1:208426888053:web:df7f8c364bc66ffef8813c"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.showSection = function(id){
document.querySelectorAll(".section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
}

window.register = async function(){
const cred = await createUserWithEmailAndPassword(auth,email.value,password.value);
await setDoc(doc(db,"users",cred.user.uid),{
name:name.value,
secondName:secondName.value,
birth:birth.value,
balance:1000
});
alert("Kayıt başarılı");
}

window.login = function(){
signInWithEmailAndPassword(auth,loginEmail.value,loginPass.value);
}

window.logout = function(){
signOut(auth);
}

window.bonus = async function(){
const user = auth.currentUser;
const ref = doc(db,"users",user.uid);
const snap = await getDoc(ref);
let bal = snap.data().balance + 100;
await updateDoc(ref,{balance:bal});
document.getElementById("balance").innerText=bal;
}

window.addBalance = async function(){
if(auth.currentUser.email !== "duman@dumanbet.com"){
alert("Yetkisiz");
return;
}
const ref = doc(db,"users",uidInput.value);
const snap = await getDoc(ref);
let bal = snap.data().balance + parseInt(amountInput.value);
await updateDoc(ref,{balance:bal});
alert("Eklendi");
}

onAuthStateChanged(auth, async(user)=>{
if(user){
const snap = await getDoc(doc(db,"users",user.uid));
if(snap.exists()){
welcome.innerText="Hoşgeldin "+snap.data().name;
balance.innerText=snap.data().balance;
}
showSection("panel");
}else{
showSection("home");
}
});
</script>

</body>
</html>
